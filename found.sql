--
-- Script was generated by Devart dbForge Studio for MySQL, Version 9.2.128.0
-- Product home page: http://www.devart.com/dbforge/mysql/studio
-- Script date 02.12.2024 16:59:55
-- Server version: 8.1.0
-- Client version: 4.1
--

-- 
-- Disable foreign keys
-- 
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;

-- 
-- Set SQL mode
-- 
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;

-- 
-- Set character set the client will use to send SQL statements to the server
--
SET NAMES 'utf8';

--
-- Set default database
--
USE found;

--
-- Drop table `devices_list`
--
DROP TABLE IF EXISTS devices_list;

--
-- Drop table `device`
--
DROP TABLE IF EXISTS device;

--
-- Drop table `auditories`
--
DROP TABLE IF EXISTS auditories;

--
-- Drop table `floors`
--
DROP TABLE IF EXISTS floors;

--
-- Drop table `building`
--
DROP TABLE IF EXISTS building;

--
-- Set default database
--
USE found;

--
-- Create table `building`
--
CREATE TABLE building (
  id INT NOT NULL AUTO_INCREMENT,
  name VARCHAR(255) DEFAULT NULL,
  shortname VARCHAR(255) DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 9,
AVG_ROW_LENGTH = 2048,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci,
ROW_FORMAT = DYNAMIC;

--
-- Create table `floors`
--
CREATE TABLE floors (
  id INT NOT NULL AUTO_INCREMENT,
  building_id INT NOT NULL,
  floor INT DEFAULT NULL,
  image VARCHAR(255) DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 9,
AVG_ROW_LENGTH = 2730,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci,
ROW_FORMAT = DYNAMIC;

--
-- Create foreign key
--
ALTER TABLE floors 
  ADD CONSTRAINT FK_floors_building_id FOREIGN KEY (building_id)
    REFERENCES building(id) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Create table `auditories`
--
CREATE TABLE auditories (
  id INT NOT NULL AUTO_INCREMENT,
  number INT NOT NULL,
  floors_id INT DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 7,
AVG_ROW_LENGTH = 2730,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci,
ROW_FORMAT = DYNAMIC;

--
-- Create foreign key
--
ALTER TABLE auditories 
  ADD CONSTRAINT FK_auditories_floors_id FOREIGN KEY (floors_id)
    REFERENCES floors(id) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Create table `device`
--
CREATE TABLE device (
  id INT NOT NULL AUTO_INCREMENT,
  name VARCHAR(255) DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 8,
AVG_ROW_LENGTH = 4096,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci,
ROW_FORMAT = DYNAMIC;

--
-- Create table `devices_list`
--
CREATE TABLE devices_list (
  id INT NOT NULL AUTO_INCREMENT,
  device_id INT DEFAULT NULL,
  auditories_id INT DEFAULT NULL,
  availability TINYINT(1) NOT NULL,
  text VARCHAR(255) DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 23,
AVG_ROW_LENGTH = 1170,
CHARACTER SET utf8mb4,
COLLATE utf8mb4_0900_ai_ci,
ROW_FORMAT = DYNAMIC;

--
-- Create foreign key
--
ALTER TABLE devices_list 
  ADD CONSTRAINT FK_devices_list_auditories_id FOREIGN KEY (auditories_id)
    REFERENCES auditories(id) ON DELETE CASCADE ON UPDATE CASCADE;

--
-- Create foreign key
--
ALTER TABLE devices_list 
  ADD CONSTRAINT FK_devices_list_device_id FOREIGN KEY (device_id)
    REFERENCES device(id) ON DELETE CASCADE ON UPDATE CASCADE;

-- 
-- Dumping data for table building
--
INSERT INTO building VALUES
(1, 'Мехфак', 'мх'),
(2, 'Гидрофак', 'гд'),
(3, 'Главный', 'гл'),
(4, 'Зоо', 'зоо'),
(5, 'Электрофак', 'эл'),
(6, 'Защита растений', 'зр'),
(7, 'Экономфак', 'эк'),
(8, 'Ветеренарная медицина', 'вм');

-- 
-- Dumping data for table floors
--
INSERT INTO floors VALUES
(1, 1, 5, '5mh'),
(2, 2, 3, '3gd'),
(3, 2, 4, '4gd'),
(4, 5, 4, '4el'),
(7, 6, 3, '3zr'),
(8, 6, 4, '4zr');

-- 
-- Dumping data for table device
--
INSERT INTO device VALUES
(1, 'Сплит'),
(2, 'Проектор'),
(3, 'Компьютерный класс'),
(4, 'Экран');

-- 
-- Dumping data for table auditories
--
INSERT INTO auditories VALUES
(1, 581, 1),
(2, 302, 2),
(3, 420, 3),
(4, 409, 4),
(5, 315, 7),
(6, 402, 8);

-- 
-- Dumping data for table devices_list
--
INSERT INTO devices_list VALUES
(1, 1, 1, 0, 'дим дагадова лудший'),
(2, 2, 1, 0, 'работае, нужен DP для подключенияаа'),
(3, 3, 1, 1, 'Все компьютеры работаютаа'),
(4, 1, 2, 1, 'fdfdfd'),
(5, 2, 2, 0, ''),
(6, 3, 2, 1, 'Все компьютеры работают'),
(7, 4, 1, 1, 'fdfdfd'),
(8, 3, 3, 1, 'f'),
(9, 1, 4, 0, ''),
(10, 3, 4, 1, 'Половина компьютеров не работает'),
(11, 4, 4, 0, 'Нужен DP'),
(12, 3, 5, 1, NULL),
(13, 1, 6, 1, 'Подключается через hdmi');

-- 
-- Restore previous SQL mode
-- 
/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;

-- 
-- Enable foreign keys
-- 
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;